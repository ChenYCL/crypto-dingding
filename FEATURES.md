# CryptoP 增强功能说明

## 🎯 新增功能

### 1. 常用币种订阅
- **默认订阅15个主流币种**：
  - BTC, ETH, BNB, SOL, ADA, DOGE, XRP, LINK
  - MATIC, AVAX, DOT, UNI, LTC, BCH, FIL
- **自动订阅用户收藏**：启动时会自动加载并订阅用户收藏的币种

### 2. 收藏夹持久化
- **本地存储**：收藏的币种会保存在VSCode的全局状态中
- **自动订阅**：添加收藏时自动订阅现货和期货价格
- **侧边栏显示**：收藏的币种会在侧边栏单独显示一个"My Favorites"分类

### 3. 状态栏显示配置
- **可配置币种**：用户可以自定义状态栏显示哪些币种
- **持久化保存**：配置会保存在本地，重启后保持
- **默认显示**：BTC, ETH, BNB, SOL, ADA

## 🚀 使用方法

### 配置状态栏显示币种
1. 按 `Ctrl+Shift+P` 打开命令面板
2. 搜索 "配置状态栏显示币种"
3. 输入要显示的币种，用逗号分隔（例如：BTCUSDT, ETHUSDT, DOGEUSDT）
4. 确认后状态栏会立即更新显示

### 添加收藏币种
1. 按 `Ctrl+Shift+P` 打开命令面板
2. 搜索 "添加收藏"
3. 输入币种符号（例如：DOGEUSDT）
4. 确认后会自动订阅并在侧边栏"My Favorites"中显示

### 查看侧边栏
1. 点击活动栏的CryptoP图标
2. 可以看到三个分类：
   - **My Favorites**：收藏的币种（如果有）
   - **Spot Markets**：现货市场
   - **Futures Markets**：期货市场

## 📊 显示特性

### 状态栏
- 滚动显示配置的币种价格
- 显示涨跌趋势图标（📈📉）
- 点击可打开主面板

### 侧边栏
- 按波动率排序（高波动率优先）
- 不同波动率使用不同图标：
  - 🚀 高波动率上涨 (>5%)
  - 🔥 高波动率下跌 (>5%)
  - 📈📉 中等波动率 (2-5%)
  - ↗↘ 低波动率 (0.1-2%)
- 分类显示统计信息（总数、涨跌数量）

## 🔧 技术实现

### 数据持久化
- 使用VSCode的`globalState`存储用户配置
- 收藏夹数据：`cryptop.favorites`
- 状态栏配置：`cryptop.statusBarSymbols`

### 自动订阅机制
- 启动时加载收藏夹并订阅
- 添加收藏时立即订阅新币种
- 配置状态栏时订阅新币种

### 实时更新
- WebSocket连接获取实时价格
- 状态栏每1.5秒滚动更新
- 侧边栏实时刷新价格和排序
